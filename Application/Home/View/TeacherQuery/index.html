<extend name="Public:base1" />
<block name="js">
    <script src="/Public/Home/js/ajaxFyQuery.js"></script>
    <script>
        $(function () {
            var $targetCityName = $("[name=city]");
            var $targetAreaName = $("[name=area]");
            var $targetTidName = $("[name=tid]");
            var $inputQuery = $(".form-input-box1 input");
            //定义查询数据库的对应的Service名
            dbName = 'Teacher';
            //初始查询
            loadDataFalse('/Home/AjaxFyQuery/initAmount',{db: dbName},amount);
            loadData('/Home/AjaxFyQuery/initQuery',{
                db:dbName,//查询数据表
                num:listNum//每页几条数据
            },insertPlace);
            appendFyDom($(".am-pagination"));

            $("[name=province]").change(function () {
                //查询关键字：省份编码,其对应的字段名
                keyName = 'province';
                keyFy = $("[name=province] option:selected").val();
                //初始化查询参数，将pageFy和currentBtGroup设置为1
                initPage();
                //查询总页数
                loadDataFalse('/Home/AjaxFyQuery/amount',{code: keyFy, name:keyName, db: dbName},amount);
                //查询city
                loadData('/Home/Base/city',{code : keyFy}, cityQuery);
                //查询考点数据
                loadData('/Home/AjaxFyQuery/ajaxFy',{
                    page:pageFy,//第几页
                    name:keyName,//查询字段名
                    code:keyFy,//查询字段值
                    db:dbName,//查询数据表
                    num:listNum//每页几条数据
                },insertPlace);
                //添加分页组件
                appendFyDom($(".am-pagination"));
            });

            $targetCityName.change(function () {
                //查询关键字：市编码，其对应的字段名
                keyName = 'city';
                keyFy = $("[name=city] option:selected").val();
                //初始化查询参数，将pageFy和currentBtGroup设置为1
                initPage();
                //查询总页数
                loadDataFalse('/Home/AjaxFyQuery/amount',{code: keyFy, name:keyName, db: dbName},amount);
                //查询area
                loadData('/Home/Base/area',{code: keyFy},areaQuery);
                //查询考点数据
                loadData('/Home/AjaxFyQuery/ajaxFy',{
                    page:pageFy,//第几页
                    name:keyName,//查询字段名
                    code:keyFy,//查询字段值
                    db:dbName,//查询数据表
                    num:listNum//每页几条数据
                },insertPlace);
                //添加分页组件
                appendFyDom($(".am-pagination"));
            });

            $targetAreaName.change(function () {
                //查询关键字：市编码，其对应的字段名
                keyName = 'area';
                keyFy = $("[name=area] option:selected").val();
                //初始化查询参数，将pageFy和currentBtGroup设置为1
                initPage();
                //查询总页数
                loadDataFalse('/Home/AjaxFyQuery/amount',{code: keyFy, name:keyName, db: dbName},amount);
                //查询考点数据
                loadData('/Home/AjaxFyQuery/ajaxFy',{
                    page:pageFy,//第几页
                    name:keyName,//查询字段名
                    code:keyFy,//查询字段值
                    db:dbName,//查询数据表
                    num:listNum//每页几条数据
                },insertPlace);
                //添加分页组件
                appendFyDom($(".am-pagination"));
            })

            $(".search-img").click(function () {
                //查询关键字：市编码，其对应的字段名
                keyName = 'pname';
                keyFy = $inputQuery.val();
                //初始化查询参数，将pageFy和currentBtGroup设置为1
                initPage();
                //查询总页数
                loadDataFalse('/Home/AjaxFyQuery/amount',{code: keyFy, name:keyName, db: dbName},amount);
                //查询考点数据
                loadData('/Home/AjaxFyQuery/ajaxFy',{
                    page:pageFy,//第几页
                    name:keyName,//查询字段名
                    code:keyFy,//查询字段值
                    db:dbName,//查询数据表
                    num:listNum//每页几条数据
                },insertPlace);
                //添加分页组件
                appendFyDom($(".am-pagination"));
            })
            $inputQuery.keydown(function (e) {
                if(e.keyCode === 13){
                    //查询关键字：市编码，其对应的字段名
                    keyName = 'pname';
                    keyFy = $inputQuery.val();
                    //初始化查询参数，将pageFy和currentBtGroup设置为1
                    initPage();
                    //查询总页数
                    loadDataFalse('/Home/AjaxFyQuery/amount',{code: keyFy, name:keyName, db: dbName},amount);
                    //查询考点数据
                    loadData('/Home/AjaxFyQuery/ajaxFy',{
                        page:pageFy,//第几页
                        name:keyName,//查询字段名
                        code:keyFy,//查询字段值
                        db:dbName,//查询数据表
                        num:listNum//每页几条数据
                    },insertPlace);
                    //添加分页组件
                    appendFyDom($(".am-pagination"));
                    return false;
                }
            })

        })
    </script>
</block>
<block name="body">
    <div class="query-common-part1">
        <div class="query-common-pt1-ct">
            <div class="query-common-pt1-ct-pt1">
                <form class="am-form" action="" method="post">
                    <fieldset>
                        <div class="am-form-group query-group">
                            <div class="form-input-box1">
                                <select style="display: inline-block;width: 15%" class="am-radius" name="province">
                                    <option value="省份">选择省份</option>
                                    <volist name="province" id="vo">
                                        <option value="{$vo.code}">{$vo.name}</option>
                                    </volist>
                                </select>
                                <select style="display: inline-block;width: 15%" class="am-radius" name="city">
                                    <option value="市" class="my-input-place">选择市</option>
                                </select>
                                <select style="display: inline-block;width: 15%" class="am-radius" name="area">
                                    <option value="区" class="my-input-place">选择区</option>
                                </select>
                                <select style="display: inline-block;width: 15%" class="am-radius" name="tid">
                                    <option value="考官">选择考官</option>
                                </select>
                                <input style="width: 20%;padding-right: 33px;display: inline-block;float: right;" type="text" placeholder="查询考官姓名" class="am-form-field am-radius">
                                <img class="search-img" src="/Public/Home/images/common/search.png" alt="">
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
        <div class="query-teacher-pt1-ct-pt2 query-common">
            <ul>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people01.jpg" alt="">
                    </a>
                    <p>李娜</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people02.jpg" alt="">
                    </a>
                    <p>汪涵</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people03.jpg" alt="">
                    </a>
                    <p>赵丽颖</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people04.jpg" alt="">
                    </a>
                    <p>何润东</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people01.jpg" alt="">
                    </a>
                    <p>李娜</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people02.jpg" alt="">
                    </a>
                    <p>汪涵</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people03.jpg" alt="">
                    </a>
                    <p>赵丽颖</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people04.jpg" alt="">
                    </a>
                    <p>何润东</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people01.jpg" alt="">
                    </a>
                    <p>李娜</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people02.jpg" alt="">
                    </a>
                    <p>汪涵</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people03.jpg" alt="">
                    </a>
                    <p>赵丽颖</p>
                </li>
                <li>
                    <a href="#">
                        <img src="/Public/Home/images/home/people04.jpg" alt="">
                    </a>
                    <p>何润东</p>
                </li>
            </ul>
        </div>
    </div>
</block>
